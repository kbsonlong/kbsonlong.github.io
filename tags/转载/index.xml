<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>转载 - 标签 - 蜷缩的蜗牛</title><link>https://www.kbsonlong.com/tags/%E8%BD%AC%E8%BD%BD/</link><description>云原生时代运维</description><generator>Hugo 0.145.0 &amp; FixIt v0.3.20</generator><language>zh-CN</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Tue, 18 Apr 2023 23:05:14 +0800</lastBuildDate><atom:link href="https://www.kbsonlong.com/tags/%E8%BD%AC%E8%BD%BD/index.xml" rel="self" type="application/rss+xml"/><item><title>源码分析 kubernetes hpa controller 水平自动扩缩容的实现原理</title><link>https://www.kbsonlong.com/posts/source-code-analysis-kubernetes-hpa-controller-horizontal-automatic-expansion-principles/</link><pubDate>Tue, 18 Apr 2023 23:05:14 +0800</pubDate><guid>https://www.kbsonlong.com/posts/source-code-analysis-kubernetes-hpa-controller-horizontal-automatic-expansion-principles/</guid><category domain="https://www.kbsonlong.com/categories/kubernetes/">Kubernetes</category><description>&lt;h2 class="heading-element" id="源码分析-kubernetes-hpa-controller-水平自动扩缩容的实现原理">&lt;span>源码分析 kubernetes hpa controller 水平自动扩缩容的实现原理&lt;/span>
 &lt;a href="#%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90-kubernetes-hpa-controller-%e6%b0%b4%e5%b9%b3%e8%87%aa%e5%8a%a8%e6%89%a9%e7%bc%a9%e5%ae%b9%e7%9a%84%e5%ae%9e%e7%8e%b0%e5%8e%9f%e7%90%86" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;p>基于 kubernetes &lt;code>v1.27.0&lt;/code> 版本进行 hpa 源码分析.&lt;/p></description></item><item><title>Grafana Mimir 和 VictoriaMetrics 之间的性能测试</title><link>https://www.kbsonlong.com/posts/performance-tests-between-grafana-mimir-and-victoriametrics/</link><pubDate>Wed, 14 Sep 2022 12:20:51 +0800</pubDate><guid>https://www.kbsonlong.com/posts/performance-tests-between-grafana-mimir-and-victoriametrics/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;p>Grafana 实验室的 &lt;code>Mimir&lt;/code> 是一个在 AGPLv3 许可下新的时间序列数据库，该工程团队从 Cortex TSDB 中汲取精华，同时降低了复杂性并提高了可扩展性。&lt;/p>
&lt;p>根据 Grafana 实验室的测试，Mimir 可以扩展到 10 亿个活跃时间序列和 5000 万个样本/秒的摄取率，该基准测试要求运行一个具有 7000 个 CPU 核心和 30TiB 内存的集群，这已经是我听说的最大、最昂贵的时间序列数据库的公共基准测试了。要重现这样规模的基准测试并不那么容易，幸运的是，在大多数情况下，用户的工作负荷要求要低得多，比较容易模拟。在本文我们将尝试比较 &lt;code>VictoriaMetrics&lt;/code> 和 &lt;code>Grafana Mimir&lt;/code> 集群在相同硬件上的中等工作负载下运行的性能和资源使用情况。&lt;/p></description></item><item><title>Istio性能指标</title><link>https://www.kbsonlong.com/posts/istio-performance-index/</link><pubDate>Tue, 13 Sep 2022 10:56:21 +0800</pubDate><guid>https://www.kbsonlong.com/posts/istio-performance-index/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;h2 class="heading-element" id="istio-指标">&lt;span>Istio 指标&lt;/span>
 &lt;a href="#istio-%e6%8c%87%e6%a0%87" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;h2 class="heading-element" id="istio-自己的-metrics">&lt;span>Istio 自己的 Metrics&lt;/span>
 &lt;a href="#istio-%e8%87%aa%e5%b7%b1%e7%9a%84-metrics" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;h3 class="heading-element" id="标准指标说明">&lt;span>标准指标说明&lt;/span>
 &lt;a href="#%e6%a0%87%e5%87%86%e6%8c%87%e6%a0%87%e8%af%b4%e6%98%8e" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h3>&lt;blockquote>
&lt;p>参考：https://istio.io/latest/docs/reference/config/metrics/&lt;/p>&lt;/blockquote>
&lt;h4 class="heading-element" id="metrics">&lt;span>Metrics&lt;/span>
 &lt;a href="#metrics" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h4>&lt;p>对于 HTTP、HTTP/2 和 GRPC 流量，Istio 默认生成以下指标：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Request Count&lt;/strong> (&lt;code>istio_requests_total&lt;/code>): This is a &lt;code>COUNTER&lt;/code> incremented for every request handled by an Istio proxy.&lt;/li>
&lt;li>&lt;strong>Request Duration&lt;/strong> (&lt;code>istio_request_duration_milliseconds&lt;/code>): This is a &lt;code>DISTRIBUTION&lt;/code> which measures the duration of requests.&lt;/li>
&lt;li>&lt;strong>Request Size&lt;/strong> (&lt;code>istio_request_bytes&lt;/code>): This is a &lt;code>DISTRIBUTION&lt;/code> which measures HTTP request body sizes.&lt;/li>
&lt;li>&lt;strong>Response Size&lt;/strong> (&lt;code>istio_response_bytes&lt;/code>): This is a &lt;code>DISTRIBUTION&lt;/code> which measures HTTP response body sizes.&lt;/li>
&lt;li>&lt;strong>gRPC Request Message Count&lt;/strong> (&lt;code>istio_request_messages_total&lt;/code>): This is a &lt;code>COUNTER&lt;/code> incremented for every gRPC message sent from a client.&lt;/li>
&lt;li>&lt;strong>gRPC Response Message Count&lt;/strong> (&lt;code>istio_response_messages_total&lt;/code>): This is a &lt;code>COUNTER&lt;/code> incremented for every gRPC message sent from a server.&lt;/li>
&lt;/ul></description></item><item><title>Envoy性能指标</title><link>https://www.kbsonlong.com/posts/envoy-performance-index/</link><pubDate>Tue, 13 Sep 2022 10:46:39 +0800</pubDate><guid>https://www.kbsonlong.com/posts/envoy-performance-index/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;h2 class="heading-element" id="envoy-指标">&lt;span>Envoy 指标&lt;/span>
 &lt;a href="#envoy-%e6%8c%87%e6%a0%87" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;h2 class="heading-element" id="envoy-指标概述">&lt;span>Envoy 指标概述&lt;/span>
 &lt;a href="#envoy-%e6%8c%87%e6%a0%87%e6%a6%82%e8%bf%b0" class="heading-mark">
 &lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">&lt;path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z">&lt;/path>&lt;/svg>
 &lt;/a>
&lt;/h2>&lt;p>Envoy 的主要目标之一是使网络易于理解。 Envoy 会根据其配置方式产生大量统计信息。一般来说，统计数据(指标)分为三类：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Downstream&lt;/strong>：Downstream 指标与外来的连接/请求有关。它们由 &lt;code>listener&lt;/code>、&lt;code>HTTP connection manager(HCM)&lt;/code>、&lt;code>TCP proxy filter&lt;/code> 等产生。&lt;/li>
&lt;li>&lt;strong>Upstream&lt;/strong>：Upstream 指标与外向的连接/请求有关。它们由 &lt;code>connection pool&lt;/code>、&lt;code>router filter&lt;/code>、&lt;code>tcp proxy filter&lt;/code>等产生。&lt;/li>
&lt;li>&lt;strong>Server&lt;/strong>：&lt;code>Server&lt;/code> 指标信息描述 Envoy 服务器实例的运作情况。服务器正常运行时间或分配的内存量等统计信息。&lt;/li>
&lt;/ul>
&lt;p>在最简单场景下，单个 Envoy Proxy 通常涉及 &lt;code>Downstream&lt;/code> 和 &lt;code>Upstream&lt;/code> 统计数据。这两种指标反映了取该 &lt;code>网络节点&lt;/code> 的运行情况。来自整个网格的统计数据提供了每个&lt;code> 网络节点&lt;/code> 和整体网络健康状况的非常详细的汇总信息。Envoy 的文档对这些指标有一些简单的说明。&lt;/p></description></item><item><title>Istio组件详解</title><link>https://www.kbsonlong.com/posts/istio-component-detailed-explanation/</link><pubDate>Mon, 12 Sep 2022 08:19:28 +0800</pubDate><guid>https://www.kbsonlong.com/posts/istio-component-detailed-explanation/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;p>在前两篇博客中：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.kbsonlong.com/posts/fe0ba1/">Istio 中的 Sidecar 注入、透明流量劫持及流量路由过程详解&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.kbsonlong.com/posts/61aaaf/">Sidecar 中的流量类型及 iptables 规则详解&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>我向你详细介绍了 Istio 数据平面中的流量，但数据平面并不能孤立的存在，本文将向你展示 Istio 中的控制平面和数据平面各组件的端口及其功能，有助于你了解这些流量之间的关系及故障排查。&lt;/p></description></item><item><title>Sidecar 中的流量类型及 iptables 规则详解</title><link>https://www.kbsonlong.com/posts/detailed-explanation-of-traffic-types-in-sidecar-and-iptables/</link><pubDate>Sun, 11 Sep 2022 14:56:39 +0800</pubDate><guid>https://www.kbsonlong.com/posts/detailed-explanation-of-traffic-types-in-sidecar-and-iptables/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;p>我在&lt;a href="https://www.kbsonlong.com/posts/fe0ba1/">之前的一篇博客中&lt;/a>讲解过 Istio 中 sidecar 的注入、使用 iptables 进行透明流量拦截及流量路由的详细过程，并以 Bookinfo 示例中的 &lt;code>productpage&lt;/code> 服务访问 &lt;code>reviews&lt;/code> 服务，和 &lt;code>reviews&lt;/code> 服务访问 &lt;code>ratings&lt;/code> 服务为例绘制了透明流量劫持示意图。在那个示意图中仅展示了 &lt;code>reviews&lt;/code> pod 接收流量和对外访问的路由，实际上 sidecar 内的流量远不止于此。&lt;/p></description></item><item><title>Istio 中的 Sidecar 注入、透明流量劫持及流量路由过程详解</title><link>https://www.kbsonlong.com/posts/detailed-explanation-of-sidecar-injection-transparent-flow-hijacking-and-traffic-route-in-istio/</link><pubDate>Sun, 11 Sep 2022 14:26:02 +0800</pubDate><guid>https://www.kbsonlong.com/posts/detailed-explanation-of-sidecar-injection-transparent-flow-hijacking-and-traffic-route-in-istio/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;p>本文最早是基于 Istio 1.11 撰写，之后随着 Istio 的版本陆续更新，最新更新时间为 2022 年 5 月 12 日，关于本文历史版本的更新说明请见文章最后。本文记录了详细的实践过程，力图能够让读者复现，因此事无巨细，想要理解某个部分过程的读者可以使用目录跳转到对应的小节阅读。&lt;/p></description></item><item><title>Istio 数据平面Pod启动过程详解</title><link>https://www.kbsonlong.com/posts/detailed-explanation/</link><pubDate>Sat, 10 Sep 2022 14:33:42 +0800</pubDate><guid>https://www.kbsonlong.com/posts/detailed-explanation/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;p>本文将为你讲解：&lt;/p>
&lt;ul>
&lt;li>Istio 中 sidecar 自动注入过程&lt;/li>
&lt;li>Istio 中的 init 容器启动过程&lt;/li>
&lt;li>启用了 Sidecar 自动注入的 Pod 的启动流程&lt;/li>
&lt;/ul>
&lt;p>下图中展示了 Istio 数据平面中的 Pod 启动完后的组件。&lt;/p>
&lt;p>&lt;img loading="lazy" src='https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20220913143432.png' alt="Istio 数据平面 Pod 内部组件">&lt;/p></description></item><item><title>理解Iptable</title><link>https://www.kbsonlong.com/posts/understanding-iptable/</link><pubDate>Sat, 10 Sep 2022 14:30:05 +0800</pubDate><guid>https://www.kbsonlong.com/posts/understanding-iptable/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>&lt;p>iptables 作为 Linux 内核中的重要功能，有着广泛的应用，在 Istio 中默认就是利用 iptables 做透明流量劫持的。理解 iptables，对于我们理解 Istio 的运作有十分重要的作用。本文将为大家简单介绍下 iptbles。&lt;/p></description></item><item><title>Istio防故障利器</title><link>https://www.kbsonlong.com/posts/istio%E9%98%B2%E6%95%85%E9%9A%9C%E5%88%A9%E5%99%A8/</link><pubDate>Mon, 23 May 2022 23:05:25 +0800</pubDate><guid>https://www.kbsonlong.com/posts/istio%E9%98%B2%E6%95%85%E9%9A%9C%E5%88%A9%E5%99%A8/</guid><category domain="https://www.kbsonlong.com/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</category><description>Istio防故障利器</description></item></channel></rss>