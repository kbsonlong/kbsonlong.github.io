<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Karmada多集群管理方案 - 蜷缩的蜗牛</title><meta name=author content="kbsonlong">
<meta name=description content="Kubernetes 衍变 在云原生时代，Kubernetes 作为一项核心技术已成为现代应用程序架构的基础，越来越多的企业使用 Kubernetes 作为容器编排系统，其成为容器编排事实标准得益于 Kubernetes 的主要有以下几个原因：
"><meta name=keywords content='karmada,kubernetes'><meta itemprop=name content="Karmada多集群管理方案"><meta itemprop=description content="Kubernetes 衍变 在云原生时代，Kubernetes 作为一项核心技术已成为现代应用程序架构的基础，越来越多的企业使用 Kubernetes 作为容器编排系统，其成为容器编排事实标准得益于 Kubernetes 的主要有以下几个原因："><meta itemprop=datePublished content="2023-11-27T18:19:26+08:00"><meta itemprop=dateModified content="2023-11-27T18:19:26+08:00"><meta itemprop=wordCount content="3046"><meta itemprop=image content="https://www.kbsonlong.com/logo_transparent.png"><meta itemprop=keywords content="Karmada,Kubernetes"><meta property="og:url" content="https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/"><meta property="og:site_name" content="蜷缩的蜗牛"><meta property="og:title" content="Karmada多集群管理方案"><meta property="og:description" content="Kubernetes 衍变 在云原生时代，Kubernetes 作为一项核心技术已成为现代应用程序架构的基础，越来越多的企业使用 Kubernetes 作为容器编排系统，其成为容器编排事实标准得益于 Kubernetes 的主要有以下几个原因："><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-27T18:19:26+08:00"><meta property="article:modified_time" content="2023-11-27T18:19:26+08:00"><meta property="article:tag" content="Karmada"><meta property="article:tag" content="Kubernetes"><meta property="og:image" content="https://www.kbsonlong.com/logo_transparent.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.kbsonlong.com/logo_transparent.png"><meta name=twitter:title content="Karmada多集群管理方案"><meta name=twitter:description content="Kubernetes 衍变 在云原生时代，Kubernetes 作为一项核心技术已成为现代应用程序架构的基础，越来越多的企业使用 Kubernetes 作为容器编排系统，其成为容器编排事实标准得益于 Kubernetes 的主要有以下几个原因："><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#ffffff data-dark=#252627 content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical type=text/html href=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ title="Karmada多集群管理方案 - 蜷缩的蜗牛"><link rel=prev type=text/html href=https://www.kbsonlong.com/posts/chaos-engineering-principles/ title=混沌工程原则><link rel=next type=text/html href=https://www.kbsonlong.com/posts/karmada-multi--cluster-multiclusservice-service-governance/ title=Karmada多集群MultiClusterService服务治理尝鲜><link rel=alternate type=text/markdown href=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/index.md title="Karmada多集群管理方案 - 蜷缩的蜗牛"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Karmada多集群管理方案","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.kbsonlong.com\/posts\/karmada-multi--cluster-management-solution\/"},"genre":"posts","keywords":"karmada, kubernetes","wordcount":3046,"url":"https:\/\/www.kbsonlong.com\/posts\/karmada-multi--cluster-management-solution\/","datePublished":"2023-11-27T18:19:26+08:00","dateModified":"2023-11-27T18:19:26+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"kbsonlong"},"description":""}</script><script src=/js/head/color-scheme.min.js></script></head><body data-header-desktop=sticky data-header-mobile=auto><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title=蜷缩的蜗牛><img class=logo src=/logo_transparent.png alt=蜷缩的蜗牛 height=32 width=32><span class=header-title-text>蜷缩的蜗牛</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class='fa-solid fa-users fa-fw fa-sm'></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=https://github.com/kbsonlong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw'></i></a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=/messages/><i class='fa-solid fa-messages'></i> 留言板</a></li><li class=menu-item><a class=menu-link href=/messages/ title=留言板>留言板</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label=选择语言 title=选择语言><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item>没有更多翻译</li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=蜷缩的蜗牛><img class=logo src=/logo_transparent.png alt=蜷缩的蜗牛 height=26 width=26><span class=header-title-text>蜷缩的蜗牛</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class='fa-solid fa-archive fa-fw fa-sm'></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class='fa-solid fa-th fa-fw fa-sm'></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class='fa-solid fa-tags fa-fw fa-sm'></i> 标签</a></li><li class=menu-item><a class=menu-link href=/friends/ title=友情链接><i class='fa-solid fa-users fa-fw fa-sm'></i> 友链</a></li><li class=menu-item><a class=menu-link href=/about/><i class='fa-solid fa-info-circle fa-fw fa-sm'></i> 关于</a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=https://github.com/kbsonlong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw'></i></a></li><li class="menu-item d-none-desktop text-center"><a class=menu-link href=/messages/><i class='fa-solid fa-messages'></i> 留言板</a></li><li class=menu-item><a class=menu-link href=/messages/ title=留言板>留言板</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label=选择语言 title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option disabled>没有更多翻译</option></select></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label=合集></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Karmada多集群管理方案</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
kbsonlong</span></span><span class=post-included-in>&nbsp;收录于 <a href=/categories/karmada/ class=post-category title="分类 - Karmada"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Karmada</a>&ensp;<a href=/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/ class=post-category title="分类 - 云原生"><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 云原生</a></span></div><div class=post-meta-line><span title="发布于 2023-11-27 18:19:26"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden=true></i><time datetime=2023-11-27>2023-11-27</time></span>&nbsp;<span title="3046 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 3100 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 7 分钟</span>&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=Karmada多集群管理方案><i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#kubernetes-衍变><code>Kubernetes</code> 衍变</a><ul><li><a href=#单-kubernetes-集群到多-kubernetes-集群>单 <code>Kubernetes</code> 集群到多 <code>Kubernetes</code> 集群</a></li><li><a href=#多-kubernetes-集群到-kubernetes-多集群>多 <code>Kubernetes</code> 集群到 <code>Kubernetes</code> 多集群</a></li></ul></li><li><a href=#解决方案>解决方案</a><ul><li><a href=#集群管理复杂性>集群管理复杂性</a></li><li><a href=#应用管理>应用管理</a></li><li><a href=#跨集群网络和服务通信>跨集群网络和服务通信</a></li></ul></li><li><a href=#karmada-是什么><code>Karmada</code> 是什么?</a></li><li><a href=#karmada-架构><code>Karmada</code> 架构</a></li><li><a href=#karmada-控制平面组件><code>Karmada</code> 控制平面组件</a><ul><li><a href=#karmada-api-server>Karmada API Server</a></li><li><a href=#karmada-controller-manager>Karmada Controller Manager</a></li><li><a href=#karmada-scheduler>Karmada Scheduler</a></li><li><a href=#etcd>ETCD</a></li></ul></li><li><a href=#karmada的关键特性>Karmada的关键特性</a><ul><li><a href=#跨云多集群多模式管理>跨云多集群多模式管理</a></li><li><a href=#多策略的多集群调度>多策略的多集群调度</a><ul><li><a href=#自定义集群调度策略>自定义集群调度策略</a></li><li><a href=#跨集群资源重调度>跨集群资源重调度</a></li></ul></li><li><a href=#跨集群服务治理>跨集群服务治理</a><ul><li><a href=#跨集群服务调用>跨集群服务调用</a></li><li><a href=#跨集群failover>跨集群Failover</a></li></ul></li><li><a href=#全局统一资源视图>全局统一资源视图</a></li></ul></li><li><a href=#karmada-部署方案>Karmada 部署方案</a><ul><li><a href=#复用-kube-apiserver>复用 <code>Kube ApiServer</code></a></li><li><a href=#控制面独立集群>控制面独立集群</a></li><li><a href=#karmada--submariner>Karmada && Submariner</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 class=heading-element id=kubernetes-衍变><span><code>Kubernetes</code> 衍变</span>
<a href=#kubernetes-%e8%a1%8d%e5%8f%98 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>在云原生时代，<code>Kubernetes</code> 作为一项核心技术已成为现代应用程序架构的基础，越来越多的企业使用 <code>Kubernetes</code> 作为容器编排系统，其成为容器编排事实标准得益于 <code>Kubernetes</code> 的主要有以下几个原因：</p><ul><li>自动化: <code>Kubernetes</code> 实现了容器的部署、扩展、负载均衡、故障恢复、滚动更新等操作的自动化，极大地简化了应用程序的管理和维护工作。这种自动化也提升了应用程序的弹性和可用性。</li><li>可移植性: <code>Kubernetes</code> 基于容器的架构模型，使得应用无需重新编码或更新配置就可以在任何云平台、物理机或者虚拟机中运行。</li><li>生态系统: <code>Kubernetes</code> 作为一个成功地开源项目，拥有强大的社区支持和生态系统，使其可以获得更好的创新、优化和安全性保障。从社区中，我们可以找到各种插件和工具，为开发者提供了丰富的选择和扩展性。</li></ul><h3 class=heading-element id=单-kubernetes-集群到多-kubernetes-集群><span>单 <code>Kubernetes</code> 集群到多 <code>Kubernetes</code> 集群</span>
<a href=#%e5%8d%95-kubernetes-%e9%9b%86%e7%be%a4%e5%88%b0%e5%a4%9a-kubernetes-%e9%9b%86%e7%be%a4 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>随着企业发展，企业中的应用也变得越来越复杂，需要区分不同环境、多机房、混合云、异地多活、全球各地域数据合规差异等，多 <code>Kubernetes</code> 集群可以在不同的云平台、不同的数据中心、不同的网络环境和不同的物理基础设施中部署，以满足不同的应用程序和业务需求。但随着集群数量的增加，也面临着诸多挑战</p><ul><li>集群管理复杂性</li><li>应用管理成本</li><li>跨集群网络和服务通信</li></ul><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20231128111555.png alt=multi-cluster></p><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20231128111700.png alt=multi-cloud></p><h3 class=heading-element id=多-kubernetes-集群到-kubernetes-多集群><span>多 <code>Kubernetes</code> 集群到 <code>Kubernetes</code> 多集群</span>
<a href=#%e5%a4%9a-kubernetes-%e9%9b%86%e7%be%a4%e5%88%b0-kubernetes-%e5%a4%9a%e9%9b%86%e7%be%a4 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>为了解决上面的种种挑战，衍变出了 <code>Kubernetes</code> 多集群概念，<code>Kubernetes</code> 多集群和多 <code>Kubernetes</code> 集群是两个不同的概念，社区也将其称为 <code>Kubernetes</code> 联邦。</p><p><code>Kubernetes</code> 联邦是将多个 <code>Kubernetes</code> 集群连接在一起，以便协同工作和实现跨集群资源和应用的统一管理、跨地域和跨云的故障切换、根据实际需求动态分配资源降低成本、提升业务的灵活性和扩展性。</p><h2 class=heading-element id=解决方案><span>解决方案</span>
<a href=#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=集群管理复杂性><span>集群管理复杂性</span>
<a href=#%e9%9b%86%e7%be%a4%e7%ae%a1%e7%90%86%e5%a4%8d%e6%9d%82%e6%80%a7 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>使用集中式的多集群管理平台，在一个统一的界面中管理多云混合云中的 Kubernetes 集群，提供集群创建、配置、监控和故障排查的功能，使集群管理变得更加简单和高效，同时提高集群的可靠性和可用性。例如社区中的 <code>Kubesphere</code> 与 <code>Rancher</code> 和公有云厂商 <code>AWS</code> 的 <code>EKS</code> 、腾讯云的 <code>TKE</code> 、阿里云的 <code>ACK</code> 等。</p><h3 class=heading-element id=应用管理><span>应用管理</span>
<a href=#%e5%ba%94%e7%94%a8%e7%ae%a1%e7%90%86 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>使用自动化的多集群应用编排和管理平台，解决多集群、多云环境下应用程序的快速部署、扩展和管理问题，保证应用程序的可靠性。</p><p>除了上面提到多集群管理平台提供了应用管理能力以外，还有如 <code>Kubernetes Federation</code>（发展了2个版本,于 22 年 8 月已存档）、<code>Karmada</code> 和字节开源不久的 <code>KubeAdmiral</code> 等开源多集群应用管理平台。</p><h3 class=heading-element id=跨集群网络和服务通信><span>跨集群网络和服务通信</span>
<a href=#%e8%b7%a8%e9%9b%86%e7%be%a4%e7%bd%91%e7%bb%9c%e5%92%8c%e6%9c%8d%e5%8a%a1%e9%80%9a%e4%bf%a1 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>降低多集群环境中的网络复杂性。使用服务网格技术，管理跨多个集群的服务流量、安全性和可观测性，实现跨集群的服务发现和通信；或者采用跨集群的网络解决方案实现网络互通。</p><p>服务网格技术有 <code>Istio</code>、<code>Linkerd</code>、<code>Flomesh</code> 、<code>Kuma</code>、<code>Mosh</code> 等，网络解决方案有 Submariner。</p><h2 class=heading-element id=karmada-是什么><span><code>Karmada</code> 是什么?</span>
<a href=#karmada-%e6%98%af%e4%bb%80%e4%b9%88 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>开源解决方案 <code>Karmada</code> 是基于 <code>Kubernetes</code> 的多集群管理方案，支持跨多个 <code>Kubernetes</code> 集群的资源调度、服务发现、负载均衡、故障转移、资源管理、策略执行等功能。</p><h2 class=heading-element id=karmada-架构><span><code>Karmada</code> 架构</span>
<a href=#karmada-%e6%9e%b6%e6%9e%84 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><p>Karmada的架构如下图所示:</p><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20231128102208.png alt=karmada-arch></p><h2 class=heading-element id=karmada-控制平面组件><span><code>Karmada</code> 控制平面组件</span>
<a href=#karmada-%e6%8e%a7%e5%88%b6%e5%b9%b3%e9%9d%a2%e7%bb%84%e4%bb%b6 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=karmada-api-server><span>Karmada API Server</span>
<a href=#karmada-api-server class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>Karmada API 服务器是直接使用 Kubernetes 的 kube-apiserver 实现的，因此 Karmada 与 Kubernetes API 自然兼容。 这也使得 Karmada 更容易实现与 Kubernetes 生态系统的集成，例如允许用户使用 kubectl 来操作 Karmada、 与 ArgoCD 集成、与 Flux 集成等等。</p><h3 class=heading-element id=karmada-controller-manager><span>Karmada Controller Manager</span>
<a href=#karmada-controller-manager class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>Karmada 控制器管理器运行了各种自定义控制器进程。</p><p>控制器负责监视Karmada对象，并与底层集群的API服务器通信，以创建原生的 Kubernetes 资源</p><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202312071711253.png alt=202312071711253></p><h3 class=heading-element id=karmada-scheduler><span>Karmada Scheduler</span>
<a href=#karmada-scheduler class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>karmada-scheduler 负责将 Kubernetes 原生API资源对象（以及CRD资源）调度到成员集群。</p><p>调度器依据策略约束和可用资源来确定哪些集群对调度队列中的资源是可用的，然后调度器对每个可用集群进行打分排序，并将资源绑定到最合适的集群。</p><h3 class=heading-element id=etcd><span>ETCD</span>
<a href=#etcd class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p>ETCD 存储了 karmada API 对象，API Server 是所有其他组件通讯的 REST 端点，Karmada Controller Manager 根据您通过 API 服务器创建的 API 对象执行操作</p><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202312011655697.png alt=karmada-arch></p><h2 class=heading-element id=karmada的关键特性><span>Karmada的关键特性</span>
<a href=#karmada%e7%9a%84%e5%85%b3%e9%94%ae%e7%89%b9%e6%80%a7 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=跨云多集群多模式管理><span>跨云多集群多模式管理</span>
<a href=#%e8%b7%a8%e4%ba%91%e5%a4%9a%e9%9b%86%e7%be%a4%e5%a4%9a%e6%a8%a1%e5%bc%8f%e7%ae%a1%e7%90%86 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><ol><li>安全隔离</li></ol><ul><li>为每个集群创建一个 namespace，以karmada-es-为前缀</li></ul><ol start=2><li>多模式</li></ol><ul><li>Push模式</li><li>Pull模式</li></ul><ol start=3><li>多云支持(Kubernetes规范)</li></ol><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20231128103546.png alt=20231128103546></p><h3 class=heading-element id=多策略的多集群调度><span>多策略的多集群调度</span>
<a href=#%e5%a4%9a%e7%ad%96%e7%95%a5%e7%9a%84%e5%a4%9a%e9%9b%86%e7%be%a4%e8%b0%83%e5%ba%a6 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><h4 class=heading-element id=自定义集群调度策略><span>自定义集群调度策略</span>
<a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e9%9b%86%e7%be%a4%e8%b0%83%e5%ba%a6%e7%ad%96%e7%95%a5 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><ol><li>不同 调度策略 下的集群分发能力</li></ol><ul><li>ClusterAffinity：基于 ClusterName、Label、Field 的定向调度。</li><li>Toleration：基于 Taint 和 Toleration 的调度。</li><li>SpreadConstraint：基于集群拓扑的调度。</li><li>ReplicasScheduling：针对有实例的工作负载的复制模式与拆分模式。</li></ul><ol start=2><li>差异化配置（ OverridePolicy ）</li></ol><ul><li>ImageOverrider：镜像的差异化配置。</li><li>ArgsOverrider：运行参数的差异化配置。</li><li>CommandOverrider：运行命令的差异化配置。</li><li>PlainText：自定义的差异化配置。</li></ul><ol start=3><li>支持 重调度</li></ol><ul><li>Descheduler（karmada-descheduler）：根据成员集群内实例状态变化触发重调度。</li><li>Scheduler-estimator(karmada-scheduler-estimator)：为调度器提供更精确的成员集群运行实例的期望状态。</li></ul><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202311291102428.png alt=overall-scheduling></p><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202312071713182.png alt="Scheduler Code Analysis"></p><h4 class=heading-element id=跨集群资源重调度><span>跨集群资源重调度</span>
<a href=#%e8%b7%a8%e9%9b%86%e7%be%a4%e8%b5%84%e6%ba%90%e9%87%8d%e8%b0%83%e5%ba%a6 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>如果一个成员集群没有足够的资源容纳其中的 Pod，Karmada 会重新调度 Pod。整体的重调度流程如下图所示
<img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20231128103604.png alt=overall-rescheduling></p><h3 class=heading-element id=跨集群服务治理><span>跨集群服务治理</span>
<a href=#%e8%b7%a8%e9%9b%86%e7%be%a4%e6%9c%8d%e5%8a%a1%e6%b2%bb%e7%90%86 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><h4 class=heading-element id=跨集群服务调用><span>跨集群服务调用</span>
<a href=#%e8%b7%a8%e9%9b%86%e7%be%a4%e6%9c%8d%e5%8a%a1%e8%b0%83%e7%94%a8 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>跨集群服务调用需要创建 <code>ServiceExporter</code> 、<code>ServiceImporter</code> 和 <code>PropagationPolicy</code> 等多个资源，使用相对复杂；</p><p>目前 <code>Karmada</code> 社区提案引入 <code>MultiClusterService</code> 一种新的 API 资源，它允许用户在多个集群中运行服务，并通过一个统一的入口进行访问，提案详细可以查看[7],具体实现[8]</p><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202312011820347.png alt=MultiClusterService></p><h4 class=heading-element id=跨集群failover><span>跨集群Failover</span>
<a href=#%e8%b7%a8%e9%9b%86%e7%be%a4failover class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h4><p>为了提高业务的高可用性，应用服务可能部署在多个不同的集群中，当集群发生故障或者用户不希望在某个集群运行负载，将集群标记不可用，并添加污点。<code>Karmada</code> 检测到成员集群故障后，会将故障集群中的工作负载驱逐并迁移到合适的其他成员集群中。</p><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202312051547344.png alt=Failover></p><h3 class=heading-element id=全局统一资源视图><span>全局统一资源视图</span>
<a href=#%e5%85%a8%e5%b1%80%e7%bb%9f%e4%b8%80%e8%b5%84%e6%ba%90%e8%a7%86%e5%9b%be class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/20231128103450.png alt=20231128103450></p><h2 class=heading-element id=karmada-部署方案><span>Karmada 部署方案</span>
<a href=#karmada-%e9%83%a8%e7%bd%b2%e6%96%b9%e6%a1%88 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><h3 class=heading-element id=复用-kube-apiserver><span>复用 <code>Kube ApiServer</code></span>
<a href=#%e5%a4%8d%e7%94%a8-kube-apiserver class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202311301814539.png alt=Deploy1></p><ul><li>优点:</li></ul><ol><li>复用 <code>Kube ApiServer</code> 的能力，可以减少 <code>ApiServer</code> 和 <code>ETCD</code> 资源成本;</li></ol><ul><li>不足:</li></ul><ol><li>尚未经过 <code>Karmada</code> 社区的全面测试，社区也没有相关测试计划;</li><li>会增加 <code>Karmada</code> 系统的计算成本,以 <code>Deployment</code> 为例采用 <code>resource template</code> 后，<code>kube-controller</code> 会为 <code>Deployment</code> 创建 Pods 并持续更新状态，<code>Karmada</code> 系统也会协调这些变化，所以可能会发生冲突,详细查看[6];</li><li>架构复杂度高，增加维护难度;</li></ol><h3 class=heading-element id=控制面独立集群><span>控制面独立集群</span>
<a href=#%e6%8e%a7%e5%88%b6%e9%9d%a2%e7%8b%ac%e7%ab%8b%e9%9b%86%e7%be%a4 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202311301815543.png alt=Deploy2></p><ul><li>优点:</li></ul><ol><li>控制面独立于集群,控制面和数据面分离，整体架构清晰，可以方便地进行升级和维护;</li><li>控制面异常不影响业务应用正常运行；</li><li>社区主流方式,社区支持;</li></ol><ul><li>不足:</li></ul><ol><li>资源成本增加;</li></ol><h3 class=heading-element id=karmada--submariner><span>Karmada && Submariner</span>
<a href=#karmada--submariner class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h3><p><img loading=lazy src=https://raw.githubusercontent.com/kbsonlong/notes_statics/master/images/202312131346058.png alt=202312131346058></p><p><code>Karmada</code> 负责资源分发，<code>Submariner</code> 负责服务发现和网络互通,如果整个数据面网络已经互通可以不开启网络互通功能</p><ul><li>优点:</li></ul><ol><li>MCS-Controller控制器无需重复造轮子，Submariner实现了服务发现和注册，实现本集群就近调度，本集群节点异常后自动分发到其他集群；</li><li>无需对Coredns编译插件，调整Coredns配置，将ClusterSet集群集的DNS解析转发给 Submariner组件lighthouse；</li></ol><ul><li>不足:</li></ul><ol><li>额外增加<code>Submariner</code> 组件，复杂度提高，资源成本提高;</li><li><code>Submariner</code> 仅支持 <code>iptables</code> 模式下的 <code>kube-proxy</code> ,目前不支持 <code>IPVS</code> ,经测试修改为<code>IPVS</code> 模式后可以正常使用服务自动发现,
主要影响的是 <code>globalnet</code>,详细<code>issue</code> 可以查看[10],具体提案可以查看[11],从提案中工作事项全部已经完成.关于<code>kube-proxy</code> 不支持 <code>IPVS</code>的事项也已经完成，并合并了<code>PR</code>[12]</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@localhost:/data/services/karmada# kubectl  get pod --context member1
</span></span><span class=line><span class=cl>NAME                     READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>nginx-77b4fdf86c-zvxpv   1/1     Running   <span class=m>0</span>          106s
</span></span><span class=line><span class=cl>tmp-shell                1/1     Running   <span class=m>0</span>          4m30s
</span></span><span class=line><span class=cl>root@localhost:/data/services/karmada# kubectl  scale deploy --context member1  nginx --replicas<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>deployment.apps/nginx scaled
</span></span><span class=line><span class=cl>root@localhost:/data/services/karmada# kubectl  get pod --context member1
</span></span><span class=line><span class=cl>NAME        READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>tmp-shell   1/1     Running   <span class=m>0</span>          4m34s
</span></span><span class=line><span class=cl>root@localhost:/data/services/karmada#</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bash-5.0# <span class=k>while</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>&gt; <span class=k>do</span>
</span></span><span class=line><span class=cl>&gt; curl nginx.default.svc.clusterset.local
</span></span><span class=line><span class=cl>&gt; sleep <span class=m>5</span>
</span></span><span class=line><span class=cl>&gt; <span class=k>done</span>
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member1
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2
</span></span><span class=line><span class=cl>member2</span></span></code></pre></td></tr></table></div></div><h2 class=heading-element id=参考资料><span>参考资料</span>
<a href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99 class=heading-mark><svg class="octicon octicon-link" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5.0 114.95 4.95l-2.5 2.5a3.5 3.5.0 01-4.95.0.751.751.0 01.018-1.042.751.751.0 011.042-.018 1.998 1.998.0 002.83.0l2.5-2.5a2.002 2.002.0 00-2.83-2.83l-1.25 1.25a.751.751.0 01-1.042-.018.751.751.0 01-.018-1.042zm-4.69 9.64a1.998 1.998.0 002.83.0l1.25-1.25a.751.751.0 011.042.018.751.751.0 01.018 1.042l-1.25 1.25a3.5 3.5.0 11-4.95-4.95l2.5-2.5a3.5 3.5.0 014.95.0.751.751.0 01-.018 1.042.751.751.0 01-1.042.018 1.998 1.998.0 00-2.83.0l-2.5 2.5a1.998 1.998.0 000 2.83z"/></svg></a></h2><ol><li><a href=https://atbug.com/kubernetes-cluster-evolution-in-multi-hybrid-cloud/ target=_blank rel="external nofollow noopener noreferrer">https://atbug.com/kubernetes-cluster-evolution-in-multi-hybrid-cloud/</a></li><li><a href=https://midbai.com/post/practice-of-karmada-as-cluster-resource-synchronization-in-disaster-recovery-systems/ target=_blank rel="external nofollow noopener noreferrer">https://midbai.com/post/practice-of-karmada-as-cluster-resource-synchronization-in-disaster-recovery-systems/</a></li><li><a href=https://karmada.io/zh/docs/ target=_blank rel="external nofollow noopener noreferrer">https://karmada.io/zh/docs/</a></li><li><a href=https://addozhang.medium.com/application-management-under-hybrid-multi-cloud-with-karmada-3c1db3efd99a target=_blank rel="external nofollow noopener noreferrer">https://addozhang.medium.com/application-management-under-hybrid-multi-cloud-with-karmada-3c1db3efd99a</a></li><li><a href=https://medium.com/expedia-group-tech/karmada-a-multi-cloud-multi-cluster-kubernetes-orchestration-part-1-c53f13c263e5 target=_blank rel="external nofollow noopener noreferrer">https://medium.com/expedia-group-tech/karmada-a-multi-cloud-multi-cluster-kubernetes-orchestration-part-1-c53f13c263e5</a></li><li><a href=https://github.com/karmada-io/karmada/issues/3907 target=_blank rel="external nofollow noopener noreferrer">https://github.com/karmada-io/karmada/issues/3907</a></li><li><a href=https://github.com/karmada-io/karmada/blob/master/docs/proposals/networking/multiclusterservice.md target=_blank rel="external nofollow noopener noreferrer">https://github.com/karmada-io/karmada/blob/master/docs/proposals/networking/multiclusterservice.md</a></li><li><a href=https://github.com/karmada-io/karmada/issues/3749 target=_blank rel="external nofollow noopener noreferrer">https://github.com/karmada-io/karmada/issues/3749</a></li><li><a href=https://submariner.io/getting-started/quickstart/kind/ target=_blank rel="external nofollow noopener noreferrer">https://submariner.io/getting-started/quickstart/kind/</a></li><li><a href=https://github.com/submariner-io/submariner/issues/939 target=_blank rel="external nofollow noopener noreferrer">https://github.com/submariner-io/submariner/issues/939</a></li><li><a href=https://github.com/sridhargaddam/enhancements/blob/gn-enhancement/submariner/globalnet-enhancement2-0.md target=_blank rel="external nofollow noopener noreferrer">https://github.com/sridhargaddam/enhancements/blob/gn-enhancement/submariner/globalnet-enhancement2-0.md</a></li><li><a href=https://github.com/submariner-io/submariner/pull/1643 target=_blank rel="external nofollow noopener noreferrer">https://github.com/submariner-io/submariner/pull/1643</a></li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2023-11-27 18:19:26">更新于 2023-11-27&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/karmada-multi--cluster-management-solution/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 X" data-sharer=twitter data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-title=Karmada多集群管理方案 data-hashtags=karmada,kubernetes><i class="fa-brands fa-x-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-hashtag=karmada><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-title=Karmada多集群管理方案 data-web><i class="fa-brands fa-whatsapp fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-title=Karmada多集群管理方案><svg class="icon" role="img" viewBox="0 0 24 24"><title>LINE</title><path d="M19.365 9.863c.349.0.63.285.63.631.0.345-.281.63-.63.63H17.61v1.125h1.755c.349.0.63.283.63.63.0.344-.281.629-.63.629h-2.386c-.345.0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346.0.627.285.627.63.0.349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211.0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346.0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195.0.375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345.0.63.285.63.63v4.771zm-5.741.0c0 .344-.282.629-.631.629-.345.0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346.0.628.285.628.63v4.771zm-2.466.629H4.917c-.345.0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348.0.63.285.63.63v4.141h1.756c.348.0.629.283.629.63.0.344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943.0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/></svg></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-title=Karmada多集群管理方案><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Myspace" data-sharer=myspace data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-title=Karmada多集群管理方案 data-description><svg class="icon" role="img" viewBox="0 0 24 24"><title>Myspace</title><path d="M19.802 12.274A3.811 3.811.0 0023.62 8.47c0-2.101-1.71-3.795-3.818-3.795a3.816 3.816.0 00-3.818 3.81 3.817 3.817.0 003.818 3.811zm-8.602.705a3.43 3.43.0 003.435-3.424A3.43 3.43.0 0011.2 6.13 3.44 3.44.0 007.764 9.566 3.436 3.436.0 0011.2 13zm-7.8.635c1.71.0 3.093-1.38 3.093-3.081.0-1.704-1.395-3.084-3.105-3.084A3.086 3.086.0 00.3 10.539c0 1.7 1.387 3.078 3.095 3.078zm0 .705c-1.96.0-3.4 1.717-3.4 3.495v1.196c0 .17.138.31.31.31h6.18a.31.31.0 00.309-.31v-1.196c0-1.779-1.437-3.5-3.398-3.5zm7.8-.56c-2.18.0-3.78 1.915-3.78 3.891v1.331c0 .188.156.344.345.344h6.87a.344.344.0 00.342-.344V17.65c0-1.976-1.598-3.891-3.777-3.891zm8.602-.617c-2.422.0-4.197 2.126-4.197 4.323v1.477c0 .21.172.381.382.381h7.63c.21.0.383-.171.383-.381v-1.477c-.001-2.197-1.776-4.323-4.198-4.323z"/></svg></a>
<a href=javascript:void(0); title="分享到 Blogger" data-sharer=blogger data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-title=Karmada多集群管理方案 data-description><i class="fa-brands fa-blogger fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://www.kbsonlong.com/posts/karmada-multi--cluster-management-solution/ data-title=Karmada多集群管理方案><i class="fa-brands fa-evernote fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/karmada/ class=post-tag title="标签 - Karmada">Karmada</a><a href=/tags/kubernetes/ class=post-tag title="标签 - Kubernetes">Kubernetes</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/chaos-engineering-principles/ class=post-nav-item rel=prev title=混沌工程原则><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>混沌工程原则</a><a href=/posts/karmada-multi--cluster-multiclusservice-service-governance/ class=post-nav-item rel=next title=Karmada多集群MultiClusterService服务治理尝鲜>Karmada多集群MultiClusterService服务治理尝鲜<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus class=comment><script src=https://giscus.app/client.js data-repo=kbsonlong/sre data-repo-id=R_kgDOMFzwNA data-category=Announcements data-category-id=DIC_kwDOMFzwNM4Cn0gn data-mapping=title data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=zh-CN data-loading=lazy crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article><aside class=toc id=toc-auto aria-label=目录><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside></main><footer class=footer><div class=footer-container><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2025</span><span class=author itemprop=copyrightHolder>
<a href=/></a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class=site-time title=网站运行中……><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i><span class="run-times ms-1">网站运行中……</span></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div><div class="footer-line beian"><span class="icp footer-divider"><a target=_blank href=https://beian.miit.gov.cn/>粤ICP备18122209号</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=查看评论><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/kbsonlong title="在 GitHub 上查看源代码" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true" width="56" height="56"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>该网站在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=preload href=/lib/katex/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/katex/katex.min.css></noscript><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=/lib/cell-watermark/watermark.min.js defer></script><script src=https://vercount.one/js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark",lightTheme:"light",origin:"https://giscus.app"}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{algoliaAppID:"WFOR67TML1",algoliaIndex:"along",algoliaSearchKey:"ea1fe535f9a7ae353f3922489c829cc1",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},siteTime:"2018-12-18T16:15:22+08:00",version:"v0.3.20",watermark:{appendto:".wrapper>main",colspacing:30,content:'<img class="fixit-icon" src="/favicon-16x16.png" alt="FixIt logo" /> FixIt 主题',enable:!0,fontfamily:"inherit",fontsize:.85,height:21,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/js/theme.min.js defer></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","6272760969",{anonymize_ip:!0})</script><script src="https://www.googletagmanager.com/gtag/js?id=6272760969" async></script></body></html>